<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sign Up / Log In — Electro Gang Community</title>
  <style>
    :root{
      --bg:#0f1114;
      --card:#131617;
      --accent1:#0072ff;
      --accent2:#00c6ff;
      --muted:#a9b4c2;
      --white:#eef6ff;
      --radius:12px;
      --glass: rgba(255,255,255,0.02);
    }
    html,body{height:100%; margin:0; font-family: Arial, sans-serif; background:var(--bg); color:var(--white);}
    .wrap{min-height:100%; display:flex; align-items:center; justify-content:center; padding:28px;}
    .card{
      width:360px; max-width:94vw; background:linear-gradient(180deg,var(--card), #0f1316); border-radius:var(--radius);
      box-shadow: 0 12px 38px rgba(2,6,23,0.7); padding:20px;
    }
    h1{margin:0 0 14px 0; font-size:20px; text-align:center;}
    .note{ color:var(--muted); font-size:13px; text-align:center; margin-bottom:14px; }
    .form-row{ display:flex; flex-direction:column; gap:10px; margin-bottom:12px; }
    input[type="text"], input[type="password"]{
      padding:11px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:var(--white);
      outline:none; font-size:14px;
    }
    .actions{ display:flex; gap:10px; justify-content:space-between; align-items:center; margin-top:6px; }
    .btn{
      background: linear-gradient(135deg,var(--accent1),var(--accent2));
      color:white; border:none; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:600;
      box-shadow:0 8px 20px rgba(0,114,255,0.14); transition: transform .14s ease, box-shadow .14s ease;
    }
    .btn:hover{ transform: translateY(-3px); box-shadow:0 18px 40px rgba(0,114,255,0.18); }
    .ghost{ background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--white); padding:9px 12px; border-radius:8px; }
    .small { font-size:13px; color:var(--muted); cursor:pointer; text-decoration:underline; background:none; border:none; padding:0; }
    .status { margin-top:12px; font-size:13px; color:var(--muted); min-height:18px; text-align:center; }
    .links { margin-top:12px; display:flex; justify-content:center; gap:10px; }
    a.link { color:var(--accent1); text-decoration:none; font-weight:600; font-size:13px; }

    /* keep subtle — no upper banner as requested */
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main" aria-labelledby="title">
      <h1 id="title">Sign Up / Log In</h1>
      <div class="note">Create an account or sign in. You will stay signed in on this browser until you log out.</div>

      <div class="form-row">
        <input id="inpUser" type="text" placeholder="Username" autocomplete="username" />
        <input id="inpPass" type="password" placeholder="Password" autocomplete="current-password" />
      </div>

      <div style="display:flex;gap:10px; align-items:center; justify-content:center;">
        <!-- Buttons call addXP() first (silent) then the action — addXP will only increase xp if user is logged in -->
        <button class="btn" id="btnSignUp" onclick="addXP(); handleSignUp()">Sign Up</button>
        <button class="btn" id="btnLogIn" onclick="addXP(); handleLogIn()">Log In</button>
      </div>

      <div class="status" id="status"></div>

      <div class="links">
        <a class="link" href="profile.html" onclick="addXP()">Go to Profile</a>
        <a class="link" href="leaderboard.html" onclick="addXP()">Leaderboard</a>
      </div>
    </div>
  </div>

<script>
/* Local storage keys and helpers */
const USERS_KEY = "eg_users";           // object: { username: { password: "...", xp: 0 } }
const CURRENT_KEY = "eg_currentUser";   // string username

function loadUsers(){
  try { return JSON.parse(localStorage.getItem(USERS_KEY) || "{}"); }
  catch(e){ return {}; }
}
function saveUsers(obj){
  localStorage.setItem(USERS_KEY, JSON.stringify(obj));
}
function getCurrentUser(){ return localStorage.getItem(CURRENT_KEY) || null; }
function setCurrentUser(u){ if(u) localStorage.setItem(CURRENT_KEY, u); else localStorage.removeItem(CURRENT_KEY); }

/* Secret XP function (silent for users) */
function addXP(amount = 10){
  const cur = getCurrentUser();
  if(!cur) return false;            // only if logged in
  const users = loadUsers();
  if(!users[cur]) {
    // if entry missing, create it silently
    users[cur] = { password: "", xp: 0 };
  }
  users[cur].xp = (Number(users[cur].xp) || 0) + Number(amount);
  saveUsers(users);
  // do NOT reveal this function to user (no alerts) — returns true so callers could optionally use it
  return true;
}

/* UI helpers */
const statusEl = document.getElementById("status");
function showStatus(msg, isError){
  statusEl.textContent = msg || "";
  statusEl.style.color = isError ? "#ff9b9b" : "var(--muted)";
}

/* Auth actions */
function handleSignUp(){
  const u = document.getElementById("inpUser").value.trim();
  const p = document.getElementById("inpPass").value;
  if(!u || !p){ showStatus("Please fill both fields.", true); return; }
  const users = loadUsers();
  if(users[u]) { showStatus("Username already exists — try logging in.", true); return; }
  // create
  users[u] = { password: p, xp: 0 };
  saveUsers(users);
  setCurrentUser(u);
  showStatus("Sign up successful. You are now logged in.");
  // after sign-up we navigate to profile after short pause
  setTimeout(()=>{ window.location.href = "profile.html"; }, 800);
}

function handleLogIn(){
  const u = document.getElementById("inpUser").value.trim();
  const p = document.getElementById("inpPass").value;
  if(!u || !p){ showStatus("Please fill both fields.", true); return; }
  const users = loadUsers();
  if(!users[u] || users[u].password !== p){ showStatus("Invalid username or password.", true); return; }
  setCurrentUser(u);
  showStatus("Login successful. Redirecting to profile...");
  setTimeout(()=>{ window.location.href = "profile.html"; }, 700);
}

/* If already signed in, show a small message and quick link to profile */
(function init(){
  const cur = getCurrentUser();
  if(cur){
    showStatus("You are already signed in as " + cur + ". Redirecting to profile...", false);
    // small delay so user sees the message then redirect
    setTimeout(()=>{ window.location.href = "profile.html"; }, 800);
  }
})();
</script>
</body>
</html>
